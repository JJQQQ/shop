<extend name="Public:layout"/>
<block name="main-content">
    <div class="main-content">
        <div class="breadcrumbs" id="breadcrumbs">
            <script type="text/javascript">
                try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
            </script>

            <ul class="breadcrumb">
                <li>
                    <i class="icon-home home-icon"></i>
                    <a href="#">首页</a>
                </li>

                <li>
                    <a href="#">商品分类管理</a>
                </li>
                <li class="active">分类列表</li>
            </ul><!-- .breadcrumb -->

            
        </div>

        <div class="page-content">
            <div class="page-header" style="height: 50px">
                <h1 style="display: inline;">
                    <a href="__CONTROLLER__/add"><i class="icon-plus"></i>添加分类</a>
                </h1>
                <div id="nav-search" style="float: right;">
                    <!-- <form action="__CONTROLLER__/index" id="searchForm" method="post">
                    	<input type="text" name="name" value="{$map['attrvalue']}" placeholder="分类名称" style="height: 35px" />
                        <button class="btn btn-purple btn-sm" type="submit" style="margin-bottom: 4px">
                            搜索
                            <i class="icon-search icon-on-right bigger-110"></i>
                        </button>
                    </form> -->
                </div><!-- /.page-header -->
            <div class="row">
                <div class="col-xs-12">
                    <!-- PAGE CONTENT BEGINS -->

                    <div class="row">
                        <div class="col-xs-12">
                            <div class="table-responsive">
                                <form action="__CONTROLLER__/getSort" method="post">
                                <table id="sample-table-1" class="table table-striped table-bordered table-hover">
                                    <thead>
                                        <tr>
                                            <th class="center">ID</th>
                                            <th>分类名</th>
                                            <th class="hidden-480 center"><button type="submit" class="btn btn-xl btn-warning">点击重新排序</button></th>
                                            <th class="hidden-480 center">级别</th>
                                            <th class="hidden-480 center">状态</th>
                                            <th class="hidden-480">操作</th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <foreach name="typeList" item="type">
                                                <tr>
                                                    <td class="center">{$type['id']}</td>
                                                    <td class="parent"><i class="icon-folder-open red"></i> {$type['name']}</td>
                                                    <td class="hidden-480 center"><input type="text" name="{$type['id']}" value="{$type['sort']==9999? '' : $type['sort']}" style="font-size:20px;width:50px;text-align:center"/></td>
                                                    <td class="hidden-480 center">{$type['layer']}</td>
                                                    <td class="hidden-480 center">
                                                    <if condition="$type['state'] eq 1">
                                                        <span class="label label-sm label-info arrowed arrowed-righ">显示</span>
                                                    <elseif condition="$type['state'] eq '2'" />
                                                        <span class="label label-sm label-inverse arrowed-in">不显示</span>
                                                    <elseif condition="$type['state'] eq '3'" />
                                                        <span class="label label-success">推  荐</span>
                                                    <else />
                                                        <span class="label label-warning">首页展示</span>
                                                    </if>
                                                    
                                                    </td>
                                                    <td class="hidden-480">
                                                        <div class="visible-md visible-lg hidden-sm hidden-xs btn-group">
                                                            <a href="__CONTROLLER__/edit/id/{$type['id']}" class="btn btn-xs btn-info">
                                                                <i class="icon-edit bigger-120">修改</i>
                                                            </a>
                                                            <a href="__CONTROLLER__/add/id/{$type['id']}" class="btn btn-xs btn-info">
                                                                <i class="icon-plus bigger-120">添加子类</i>
                                                            </a>

                                                            <a href="__CONTROLLER__/del/id/{$type['id']}" class="btn btn-xs btn-danger">
                                                                <i class="deltype icon-trash bigger-120">删除</i>
                                                            </a>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <notempty name="type['child']">
                                                    <foreach name="type['child']" item="v">
                                                        <tr class="type{$type['id']}" style="display:none">
                                                            <td class="center">{$v['id']}</td>
                                                            <td>　　<i class="icon-folder-close pink"></i> {$v['name']}</td>
                                                            <td class="hidden-480 center"><input type="text" name="{$v['id']}" value="{$v['sort']==9999? '' : $v['sort']}" style="font-size:20px;width:50px;text-align:center"/></td>
                                                            <td class="hidden-480 center">{$v['layer']}</td>
                                                            <td class="hidden-480 center">
                                                            <if condition="$v['state'] eq 1">
                                                                <span class="label label-sm label-info arrowed arrowed-righ">显示</span>
                                                            <elseif condition="$v['state'] eq '2'" />
                                                                <span class="label label-sm label-inverse arrowed-in">不显示</span>
                                                            <elseif condition="$v['state'] eq '3'" />
                                                                <span class="label label-success">推  荐</span>
                                                            <else />
                                                                <span class="label label-warning">首页展示</span>
                                                            </if>
                                                            
                                                            </td>
                                                            <td class="hidden-480">
                                                                <div class="visible-md visible-lg hidden-sm hidden-xs btn-group">
                                                                    <a href="__CONTROLLER__/edit/id/{$v['id']}" class="btn btn-xs btn-info">
                                                                        <i class="icon-edit bigger-120">修改</i>
                                                                    </a>
                                                                    <a href="__CONTROLLER__/add/id/{$v['id']}" class="btn btn-xs btn-info">
                                                                        <i class="icon-plus bigger-120">添加子类</i>
                                                                    </a>

                                                                    <a href="__CONTROLLER__/del/id/{$v['id']}" class="btn btn-xs btn-danger">
                                                                        <i class="deltype icon-trash bigger-120">删除</i>
                                                                    </a>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </foreach>
                                                </notempty>
                                        </foreach>
                                        <tr><td colspan="12">{$page}</td></tr>
                                    </tbody>
                                </table>
                                </form>
                            </div><!-- /.table-responsive -->
                        </div><!-- /span -->
                    </div><!-- /row -->


                    <div class="hr hr-18 dotted hr-double"></div>
                    <!-- PAGE CONTENT ENDS -->
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.page-content -->
    </div>
</block>
<block name="js">
<script type="text/javascript">
    //删除提示
    $('.deltype').click(function(){
        if(!confirm('是否确认删除此类别！')){
            return false;
        }
    })
    //展开子类
    $('.parent').bind('click',function(){
        var type = $(this).prev().html();
        if($('.type'+type).length == 0){
            alert('没有子类,请添加！');
        }
        $('.type'+type).toggle();
    })
    
</script>
</block>